autogenerated = 0

# ============================================================================
# HYPRLAND CONFIGURATION
# Author: merneo
# Theme: Catppuccin Mocha Green
# Platform: Wayland (X11 support via XWayland)
# Description:
#   A comprehensive Hyprland (dynamic tiling window manager) configuration
#   optimized for productivity with vim-style navigation, dynamic effects
#   (blur/shadows/animations), and multi-monitor support. This config uses
#   exec-once for one-time service initialization on login, hyprctl for
#   runtime behavior, and sed-based scripts for persistent state management.
# ============================================================================

autogenerated = 0  # Prevents Hyprland from auto-generating config on startup

################
### MONITORS ###
################

# MONITOR DETECTION & AUTO-SCALING
# Configuration syntax: monitor=<name>,<resolution>,<offset>,<scale>
# 'preferred,auto,auto' enables dynamic resolution detection and positioning.
# This is critical for laptop docking scenarios where external monitors
# are plugged/unplugged frequently.
monitor=,preferred,auto,auto

# ============================================================================
# WORKSPACE ASSIGNMENT TO MONITORS
# ============================================================================
# Strategy: Fixed mapping of workspaces to physical monitors ensures
# persistent workflow. Users always know where their workspaces are located.
#
# Layout:
#   - Laptop screen (eDP-1): Workspaces 1-5 [Primary, always available]
#   - External monitor (HDMI-A-1): Workspaces 6-10 [Secondary, optional]
#
# 'default:true' ensures the first connected monitor becomes the active
# workspace when Hyprland starts.
# ============================================================================

workspace = 1, monitor:eDP-1, default:true  # Primary workspace on built-in display
workspace = 2, monitor:eDP-1                # Persistent assignment prevents drift
workspace = 3, monitor:eDP-1
workspace = 4, monitor:eDP-1
workspace = 5, monitor:eDP-1
workspace = 6, monitor:HDMI-A-1, default:true  # Falls back if HDMI-A-1 disconnected
workspace = 7, monitor:HDMI-A-1
workspace = 8, monitor:HDMI-A-1
workspace = 9, monitor:HDMI-A-1
workspace = 10, monitor:HDMI-A-1

###################
### MY PROGRAMS ###
###################

# ============================================================================
# APPLICATION ALIASES
# ============================================================================
# Centralizing application definitions allows for rapid iteration and
# consistency across keybindings. Update these to modify all references
# simultaneously.
# ============================================================================

$terminal = kitty               # GPU-accelerated terminal with Wayland support
$fileManager = dolphin          # KDE file manager with Wayland backend
$menu = albert toggle           # Application launcher (toggles visibility)

#################
### AUTOSTART ###
#################

# ============================================================================
# INITIALIZATION SEQUENCE
# ============================================================================
# 'exec-once' executes commands only once per session, even after config
# reloads. Startup order matters: services with dependencies should be
# delayed via 'sleep' to ensure prior services have initialized.
#
# Order rationale:
#   1. Waybar (status bar) - independent, can start immediately
#   2. swayosd-server (OSD daemon) - independent, can start immediately
#   3. mako (notification daemon) - independent, can start immediately
#   4. albert (app launcher) - delayed 1s to ensure systray is ready
#   5. wallpaper-rotate - delayed 2s to ensure display server ready
# ============================================================================

exec-once = waybar  # Status bar: displays workspaces, time, battery, network

# On-Screen Display (volume/brightness feedback)
# Provides visual feedback for hardware key presses (XF86AudioRaiseVolume, etc.)
exec-once = swayosd-server --style ~/.config/swayosd/style.css

exec-once = mako  # Desktop notification daemon (respects freedesktop spec)

# Application launcher with system tray support
# 1-second delay ensures the system tray is initialized
exec-once = sleep 1 && albert

# Wallpaper management daemon
# 2-second delay ensures display server fully initialized
exec-once = sleep 2 && ~/.local/bin/wallpaper-rotate.sh

# ============================================================================
# MONITOR HOTPLUG DETECTION & DYNAMIC WALLPAPER UPDATE
# ============================================================================
# This section listens to Hyprland's event socket and reacts to monitor
# connection events. When a user plugs in an external monitor, the
# wallpaper-rotate script is triggered to ensure the new display receives
# a wallpaper immediately (preventing a blank screen).
#
# Implementation Details:
#   - socat: Creates Unix socket connection to Hyprland's event stream
#   - UNIX-CONNECT: Connects to the active Hyprland instance socket
#   - Reads events line-by-line, filters for 'monitoradded' prefix
#   - Executes wallpaper rotation with 1s delay (allows config parsing)
#
# Socket Path:
#   $XDG_RUNTIME_DIR/hypr/$HYPRLAND_INSTANCE_SIGNATURE/.socket2.sock
#   - $XDG_RUNTIME_DIR: Usually /run/user/1000 on Linux
#   - $HYPRLAND_INSTANCE_SIGNATURE: UUID of current Hyprland session
# ============================================================================

exec-once = socat -U - UNIX-CONNECT:$XDG_RUNTIME_DIR/hypr/$HYPRLAND_INSTANCE_SIGNATURE/.socket2.sock | while read -r line; do [[ "$line" == "monitoradded"* ]] && sleep 1 && ~/.local/bin/wallpaper-rotate.sh; done

#############################
### ENVIRONMENT VARIABLES ###
#############################

# ============================================================================
# CURSOR CONFIGURATION
# ============================================================================
# XCURSOR_SIZE: Applies to X11 apps running via XWayland
# HYPRCURSOR_SIZE: Applies to native Wayland apps
# Both must be synchronized for consistent appearance across app types
# Value of 24px is standard for 1080p+ displays with 96 DPI
# ============================================================================

env = XCURSOR_SIZE,24        # X11/XWayland cursor size (for legacy apps)
env = HYPRCURSOR_SIZE,24     # Native Wayland cursor size

# ============================================================================
# LOCALIZATION & CHARACTER ENCODING
# ============================================================================
# Sets both LANG and LC_ALL to prevent locale mismatch issues.
# en_US.UTF-8 ensures:
#   - Proper display of Unicode characters (emoji, symbols)
#   - Correct text collation/sorting in file managers
#   - Proper keyboard layout interpretation
# ============================================================================

env = LANG,en_US.UTF-8        # Primary locale variable
env = LC_ALL,en_US.UTF-8      # Override all other LC_* variables

#####################
### LOOK AND FEEL ###
#####################

# ============================================================================
# WINDOW LAYOUT & SPACING CONFIGURATION
# ============================================================================
# This section defines the visual appearance of windows: borders, gaps,
# and overall layout engine. These settings directly impact the aesthetic
# and usability of the tiling environment.
# ============================================================================

general {
    # ========================================================================
    # GAPS & SPACING
    # ========================================================================
    # 'gaps_in': Internal spacing between tiled windows (pixels)
    # 'gaps_out': External spacing between windows and screen edges (pixels)
    # Values of 11px create a balanced visual separation without excessive
    # use of screen real estate.
    # ========================================================================

    gaps_in = 11    # Space between adjacent windows
    gaps_out = 11   # Space between window group and monitor edge

    # ========================================================================
    # BORDER STYLING
    # ========================================================================
    # 'border_size': Width of window borders in pixels
    # Colors use RGBA format (Red, Green, Blue, Alpha):
    #   - 'a6e3a1ff': Catppuccin Mocha Green (active/focused window)
    #     Signals to user that window is ready for input
    #   - '1e1e2eff': Dark base color (inactive/unfocused window)
    #     Reduces visual noise for windows not being worked on
    # ========================================================================

    border_size = 2                              # Thin but visible borders
    col.active_border = rgba(a6e3a1ff)           # Green for focused window
    col.inactive_border = rgba(1e1e2eff)         # Dark for unfocused windows

    # ========================================================================
    # INPUT METHOD: KEYBOARD VS. MOUSE
    # ========================================================================
    # 'resize_on_border = false' enforces keyboard-driven resizing via
    # keybinds instead of dragging window borders. This ensures precision
    # and prevents accidental resizing when passing through borders.
    # Users can still resize via Alt+RightClick (mouse) keybind.
    # ========================================================================

    resize_on_border = false  # Disable drag-to-resize on borders

    # ========================================================================
    # TEARING & VSYNC
    # ========================================================================
    # 'allow_tearing = false' keeps VSYNC enabled globally. Disabling VSYNC
    # (allow_tearing = true) reduces latency but causes screen tearing,
    # which is generally undesirable on desktop systems. Gaming scenarios
    # are rare in a tiling WM, so VSYNC is preferred.
    # ========================================================================

    allow_tearing = false  # Keep VSYNC enabled for smooth rendering

    # ========================================================================
    # LAYOUT ENGINE
    # ========================================================================
    # 'layout = dwindle': Dynamic tiling with automatic window arrangement.
    # Alternative: 'master' (master/slave layout, not used here).
    #
    # Dwindle strategy:
    #   - Each new window splits the focused window's space (50/50)
    #   - Maintains binary tree structure of splits
    #   - Allows pseudotiling for floating-like behavior within tiling
    # ========================================================================

    layout = dwindle  # Dynamic binary tree layout
}

decoration {
    # ========================================================================
    # WINDOW CORNER ROUNDING
    # ========================================================================
    # 'rounding' controls corner radius in pixels:
    #   - 0: Sharp corners (Corner Mode - minimal GPU load)
    #   - 12: Rounded corners (Rounded Mode - modern aesthetic)
    #
    # These values are dynamically modified by shell scripts:
    #   - hyprland-rounded.sh: Sets rounding=12, enables animations
    #   - hyprland-corner.sh: Sets rounding=0, disables animations
    #
    # 'rounding_power': Controls how aggressively rounding is applied.
    # Higher values = more pronounced rounding at corners.
    # ========================================================================

    rounding = 0              # Start in Corner Mode (sharp corners)
    rounding_power = 3        # Moderate rounding curve

    # ========================================================================
    # WINDOW OPACITY (TRANSPARENCY)
    # ========================================================================
    # Opacity range: 0.0 (invisible) to 1.0 (fully opaque)
    # Both active and inactive windows are fully opaque by default.
    # Per-window transparency is handled by effects-toggle.sh (kitty=0.90)
    # This prevents confusion from global transparency affecting all windows.
    # ========================================================================

    active_opacity = 1.0      # Focused window: fully opaque
    inactive_opacity = 1.0    # Unfocused window: fully opaque

    # ========================================================================
    # SHADOW RENDERING
    # ========================================================================
    # Drop shadows create depth by rendering a shadow beneath/around windows.
    # Disabled by default because:
    #   1. GPU-intensive (2-3% additional rendering cost)
    #   2. Noticeable performance impact on older integrated GPUs
    #   3. Toggleable via effects-toggle.sh for users who want it
    #
    # When enabled:
    #   - 'range': Shadow spread distance (pixels)
    #   - 'render_power': Quality of shadow blur (higher = smoother)
    #   - 'color': Shadow color in RGBA format
    #     (11111bee = very dark gray with 94% opacity)
    # ========================================================================

    shadow {
        enabled = no           # Disabled by default (performance first)
        range = 4              # Shadow extends 4px beyond window bounds
        render_power = 3       # Moderate blur quality
        color = rgba(11111bee) # Very dark shadow color
    }

    # ========================================================================
    # BACKGROUND BLUR
    # ========================================================================
    # Applies Gaussian blur to the background visible through transparent
    # windows (e.g., transparent Kitty terminal, Waybar).
    #
    # Disabled by default because:
    #   1. GPU-intensive (significant rendering cost)
    #   2. Can reduce visual clarity of text on blurred backgrounds
    #   3. Toggleable via effects-toggle.sh for aesthetic preferences
    #
    # When enabled:
    #   - 'size': Blur radius in pixels (higher = more blur)
    #   - 'passes': Number of blur passes (2 = good balance)
    #   - 'vibrancy': Increases saturation of blurred content
    #     (0.3 = subtle enhancement, 1.0 = dramatic saturation boost)
    # ========================================================================

    blur {
        enabled = no          # Disabled by default (performance first)
        size = 10             # Blur radius: 10px
        passes = 2            # 2-pass blur for performance/quality balance
        vibrancy = 0.3        # Subtle saturation increase of blurred background
    }
}

animations {
    # ========================================================================
    # ANIMATION SYSTEM
    # ========================================================================
    # Animations add visual continuity when windows open/close/move.
    # Disabled by default (Corner Mode) for:
    #   1. Minimal resource consumption
    #   2. Instant feedback (important for vim-users expecting immediate response)
    #   3. Can be toggled via hyprland-rounded.sh to enable modern aesthetic
    #
    # When enabled (Rounded Mode), animations use Bezier curves for
    # natural acceleration/deceleration (easing), similar to iOS animations.
    # ========================================================================

    enabled = no  # Disabled in Corner Mode; enabled in Rounded Mode

    # ========================================================================
    # BEZIER CURVES (EASING FUNCTIONS)
    # ========================================================================
    # Bezier curves define acceleration curves: P0(0,0) -> P1 -> P2 -> P3(1,1)
    # Parameters: bezier = <name>, <x1>, <y1>, <x2>, <y2>
    #   - x-axis: time progression (0 to 1)
    #   - y-axis: animation progress (0 to 1)
    #   - Points 1-2 control curve shape
    #
    # Curves defined:
    #   - ios: Fast-in, then ease-out (responsive iOS feel)
    #   - iosOut: Slow-in, then snap-out (decelerate then finish quickly)
    #   - smooth: Gradual acceleration (smooth, natural motion)
    # ========================================================================

    bezier = ios,            0.25, 0.1,  0.25, 1   # iOS ease-out
    bezier = iosOut,         0.16, 1,    0.3,  1   # iOS exit animation
    bezier = smooth,         0.4,  0,    0.2,  1   # Smooth ease-in-out

    # ========================================================================
    # ANIMATION DEFINITIONS
    # ========================================================================
    # Syntax: animation = <event>, <overall-speed>, <speed>, <curve>, [easing]
    #   - event: Window/workspace event type (e.g., windows, fadeIn, layers)
    #   - overall-speed: Multiplier for animation speed (lower = faster)
    #   - speed: Duration in deciseconds (1 = 100ms)
    #   - curve: Bezier curve or 'default' (linear)
    #   - easing: Optional direction (slide, popin, etc.)
    #
    # Animation strategy:
    #   - Window movements: ios curve (responsive)
    #   - Fade effects: ios curve (quick)
    #   - Workspace changes: ios curve with slide (smooth directional flow)
    #   - Closing windows: iosOut curve (fast exit)
    # ========================================================================

    animation = global,        1,     6,     default      # Global placeholder
    animation = border,        1,     10,    ios          # Border color transition
    animation = windows,       1,     7,     ios,     slide    # Window movement
    animation = windowsIn,     1,     7,     ios,     slide    # Window open
    animation = windowsOut,    1,     5,     iosOut,  slide    # Window close
    animation = fadeIn,        1,     8,     ios               # Element fade-in
    animation = fadeOut,       1,     6,     smooth            # Element fade-out
    animation = fade,          1,     8,     ios               # General fade
    animation = layers,        1,     8,     ios,     slide    # Layer transitions
    animation = layersIn,      1,     8,     ios,     slide    # Layer appearance
    animation = layersOut,     1,     6,     smooth,  slide    # Layer disappear
    animation = fadeLayersIn,  1,     8,     ios               # Layer fade-in
    animation = fadeLayersOut, 1,     6,     smooth            # Layer fade-out
    animation = workspaces,    1,     6,     ios,     slide    # Workspace switch
    animation = workspacesIn,  1,     6,     ios,     slide    # Enter workspace
    animation = workspacesOut, 1,     5,     smooth,  slide    # Leave workspace
    animation = zoomFactor,    1,     8,     ios               # Window size change
}

dwindle {
    # ========================================================================
    # DWINDLE LAYOUT OPTIONS
    # ========================================================================
    # 'pseudotile': Enables pseudo-tiling mode for individual windows.
    # When enabled (Super+P toggle), windows behave like floating windows
    # but respect the tiling layout. Useful for:
    #   - Resizing windows to specific dimensions while maintaining tiling
    #   - Dialog boxes that should float but stay organized
    #   - Temporary floating state without leaving the layout
    # ========================================================================

    pseudotile = true        # Allow window floating within tiling

    # ========================================================================
    # SPLIT DIRECTION PRESERVATION
    # ========================================================================
    # 'preserve_split': When a window is closed, the remaining space is
    # redistributed rather than the split direction being reset.
    # This maintains layout stability and predictability.
    # Example:
    #   - Window A splits vertically into A | B
    #   - Close B → A regains full space
    #   - New window C enters → still splits vertically (preserves direction)
    # ========================================================================

    preserve_split = true    # Maintain split direction on window close
}

master {
    # ========================================================================
    # MASTER LAYOUT (UNUSED)
    # ========================================================================
    # Configuration for the alternative 'master' window manager layout.
    # This layout designates one "master" window on the left/top,
    # with other windows stacked on the right/bottom.
    # Currently not used (dwindle is primary), but kept for reference.
    # ========================================================================

    new_status = master       # New windows become master or stack
}

misc {
    # ========================================================================
    # MISCELLANEOUS SETTINGS
    # ========================================================================
    # 'force_default_wallpaper': Controls whether Hyprland shows its mascot.
    #   - -1: Don't set any wallpaper (use system default/black)
    #   - 0: Show Hyprland mascot
    #   - 1: Show Hyprland anime wallpaper
    # Value of -1 allows wallpaper-rotate.sh to manage wallpapers.
    # ========================================================================

    force_default_wallpaper = -1    # No default wallpaper (custom managed)
    disable_hyprland_logo = false   # Keep Hyprland logo available

}

xwayland {
    # ========================================================================
    # XWAYLAND CONFIGURATION (X11 COMPATIBILITY)
    # ========================================================================
    # Hyprland runs X11 apps (via XWayland) alongside native Wayland apps.
    # 'force_zero_scaling': Prevents integer scaling of X11 apps on HiDPI.
    # Without this, X11 apps appear pixelated on 2x+ DPI screens.
    # With this, X11 apps render natively (may appear small on HiDPI).
    # ========================================================================

    force_zero_scaling = true       # Prevent pixelated X11 scaling
}

#############
### INPUT ###
#############

# ============================================================================
# KEYBOARD & MOUSE INPUT CONFIGURATION
# ============================================================================
# This section defines input device behavior: keyboard layout, mouse
# sensitivity, gesture recognition, and device-specific overrides.
# ============================================================================

input {
    # ====================================================================
    # KEYBOARD LAYOUT
    # ====================================================================
    # 'kb_layout': System keyboard layout (US English QWERTY)
    # Can be switched per-workspace if needed, but US is standard here.
    # ====================================================================

    kb_layout = us              # US QWERTY keyboard layout

    # ====================================================================
    # MOUSE BEHAVIOR
    # ====================================================================
    # 'follow_mouse': Focus windows when mouse enters (sloppy focus)
    #   - 0: No automatic focus on mouse movement
    #   - 1: Focus follows mouse cursor (current)
    #   - 2: Focus follows mouse, cycles through windows
    # ====================================================================

    follow_mouse = 1            # Focus follows mouse (sloppy focus)

    # ====================================================================
    # MOUSE SENSITIVITY
    # ====================================================================
    # 'sensitivity': Applies acceleration/deceleration to mouse movement.
    # Range: -1.0 (reverse) to 1.0 (accelerate), 0 = no modification
    # Value of 0 means mouse speed is determined by system settings only.
    # ====================================================================

    sensitivity = 0             # No additional mouse acceleration

    # ====================================================================
    # TOUCHPAD INPUT (Alps GlidePoint)
    # ====================================================================
    # Comprehensive touchpad configuration for HP EliteBook x360 1030 G2.
    # Device: AlpsPS/2 ALPS GlidePoint
    # ====================================================================

    touchpad {
        # Scroll direction: false = Unix (drag down = scroll down)
        natural_scroll = false

        # Tap-to-click: Single tap = left click
        tap-to-click = true

        # Drag lock: Lift finger during drag without releasing
        drag_lock = false

        # Disable touchpad while typing to prevent accidental touches
        disable_while_typing = true

        # Click behavior: clickfinger = 1-finger click = left, 2-finger = right
        clickfinger_behavior = true

        # Middle mouse button emulation (3-finger tap)
        middle_button_emulation = true

        # Tap-and-drag: Double tap and hold to drag
        tap-and-drag = true
    }
}

# ============================================================================
# GESTURE RECOGNITION
# ============================================================================
# Defines multi-finger touch gestures on trackpad.
# Syntax: gesture = <fingers>, <direction>, <command>
# ============================================================================

gesture = 3, horizontal, workspace   # 3-finger swipe left/right = workspace switch

# ============================================================================
# DEVICE-SPECIFIC CONFIGURATION
# ============================================================================
# Overrides default input settings for specific hardware devices.
# Matched by device name (reported by 'hyprctl devices' command).
# ============================================================================

device {
    # Device: Epic Mouse V1 (specific gaming mouse)
    # Applies negative sensitivity (-0.5) to reduce acceleration
    # This is a personal preference for this specific mouse model
    name = epic-mouse-v1
    sensitivity = -0.5          # Reduce sensitivity on this device
}

###################
### KEYBINDINGS ###
###################

# ============================================================================
# KEYBINDING PHILOSOPHY
# ============================================================================
# This configuration uses a hierarchical keybinding structure:
#
# Modifier Precedence:
#   $mainMod (Super/Windows key): Primary control modifier
#   Alt: Secondary control modifier (alternative/convenience binds)
#   Ctrl: Application-specific (passed through to apps)
#
# Mnemonic naming:
#   Q = Quit (launch terminal)
#   E = Explorer (file manager)
#   R = Run (launcher menu)
#   C = Close (kill window)
#   M = Meta/Manager (exit)
#   V = eVent floating (toggle floating)
#   P = Pseudo-tiling
#   S = Screenshot
#   W = Wallpaper
#
# Vim-style navigation (hjkl) used throughout for consistency.
# ============================================================================

$mainMod = SUPER  # Windows/Super key as primary modifier

# ============================================================================
# APPLICATION LAUNCHING (Super + Letter)
# ============================================================================
# Core applications are bound to intuitive single-key mnemonics.
# These are the most frequently accessed applications.
# ============================================================================

bind = $mainMod, Q, exec, $terminal      # Q = Quit/Quick terminal launch
bind = $mainMod, E, exec, $fileManager   # E = Explorer/File manager
bind = $mainMod, R, exec, $menu          # R = Run/Application launcher
bind = ALT, Space, exec, albert toggle   # Alt+Space = macOS Spotlight equivalent

# ============================================================================
# WINDOW MANAGEMENT (Super + Letter)
# ============================================================================
# Control window state: closing, floating, fullscreen, tiling mode.
# These operations apply to the currently focused window.
# ============================================================================

bind = $mainMod, C, killactive,          # C = Close active window
bind = $mainMod, M, exit,                # M = Manager exit (leave Hyprland)
bind = $mainMod, V, togglefloating,      # V = eVent floating (toggle float mode)
bind = , F11, fullscreen,                # F11 = Universal fullscreen toggle
bind = $mainMod, P, pseudo,              # P = Pseudo-tiling mode

# ============================================================================
# SCREENSHOT KEYBINDINGS
# ============================================================================
# Two modes of operation: standard (instant) and prepared (aesthetic).
#
# Standard (Super+S):
#   - Captures entire screen immediately
#   - Saves to home directory with timestamp
#   - Useful for quick bug reports, documentation
#
# Prepared (Super+Shift+S):
#   - Prepares clean environment (hides UI, disables effects for consistency)
#   - Allows time to arrange windows/content
#   - Optimal for aesthetic screenshots (wallpaper reveals, layouts)
# ============================================================================

bind = $mainMod, S, exec, grim ~/screenshot-$(date +%Y%m%d-%H%M%S).png && notify-send "Screenshot saved"
bind = $mainMod SHIFT, S, exec, ~/.local/bin/screenshot-mode.sh     # Enter screenshot mode
bind = $mainMod SHIFT, F, exec, ~/.local/bin/screenshot-mode-exit.sh # Exit screenshot mode

# ============================================================================
# CUSTOM DESKTOP MODE SCRIPTS (Super+Shift / Super+Ctrl)
# ============================================================================
# These keybindings trigger external shell scripts that modify multiple
# configuration files and apply runtime changes via hyprctl. Each script
# is idempotent (safe to run multiple times).
#
# Visual Effects Toggle:
#   - Enables/disables blur, shadows, transparency effects
#   - Toggles animations and window opacity
#   - Impacts performance vs. aesthetics
#
# Rounded Mode (Super+Shift+R / Super+Ctrl+R):
#   - Corners: 12px (modern, rounded aesthetic)
#   - Animations: Enabled (fluid window transitions)
#   - Theme: Rounded Albert launcher variant
#   - Best for: Photography, presentations, aesthetic preferences
#
# Corner Mode (Super+Shift+C / Super+Ctrl+C):
#   - Corners: 0px (sharp, minimal aesthetic)
#   - Animations: Disabled (instant feedback for vim users)
#   - Theme: Sharp Albert launcher variant
#   - Best for: Performance, speed, minimal distraction
#
# Wallpaper Change (Super+Shift+W):
#   - Manually triggers wallpaper rotation script
#   - Selects random wallpaper from ~/Pictures/Wallpapers/walls
#   - Applies to all connected monitors
# ============================================================================

bind = $mainMod SHIFT, E, exec, ~/.local/bin/effects-toggle.sh      # Toggle blur/shadows
bind = $mainMod SHIFT, R, exec, ~/.local/bin/hyprland-rounded.sh    # Rounded mode (12px + animations)
bind = $mainMod SHIFT, C, exec, ~/.local/bin/hyprland-corner.sh     # Corner mode (0px + no animations)
bind = $mainMod SHIFT, W, exec, ~/.local/bin/wallpaper-change.sh    # Cycle wallpapers manually
bind = $mainMod CTRL, C, exec, ~/.local/bin/hyprland-corner.sh      # Alt binding for corner mode
bind = $mainMod CTRL, R, exec, ~/.local/bin/hyprland-rounded.sh     # Alt binding for rounded mode

# ============================================================================
# WINDOW FOCUS NAVIGATION (Super + hjkl / Arrow Keys)
# ============================================================================
# Vim-style navigation for moving focus between windows.
# Both hjkl (vim) and arrow keys (universal) are supported for accessibility.
#
# Mnemonic: hjkl = left/down/up/right (vim movement)
# This is the most frequently used keybinding in a tiling WM.
# Consistency across all Hyprland, Neovim, and Tmux configurations enables
# seamless "muscle memory" when switching between applications.
# ============================================================================

bind = $mainMod, h, movefocus, l         # h = left (vim)
bind = $mainMod, j, movefocus, d         # j = down (vim)
bind = $mainMod, k, movefocus, u         # k = up (vim)
bind = $mainMod, l, movefocus, r         # l = right (vim)
bind = $mainMod, left, movefocus, l      # Arrow key: left
bind = $mainMod, right, movefocus, r     # Arrow key: right
bind = $mainMod, up, movefocus, u        # Arrow key: up
bind = $mainMod, down, movefocus, d      # Arrow key: down

# ============================================================================
# MONITOR NAVIGATION & WINDOW MOVEMENT BETWEEN MONITORS
# ============================================================================
# Control focus and window placement across multiple physical displays.
#
# Focus Movement (Super+O):
#   - Cycles focus through connected monitors
#   - Useful when using external displays for context switching
#
# Window Movement (Super+Shift+O):
#   - Moves the active window to the next monitor
#   - Respects workspace assignment rules (e.g., moving from eDP-1 to HDMI-A-1)
# ============================================================================

bind = $mainMod, O, focusmonitor, +1       # Focus next monitor
bind = $mainMod SHIFT, O, movewindow, mon:+1 # Move window to next monitor

# ============================================================================
# WORKSPACE NAVIGATION (Super + Number)
# ============================================================================
# Switch between workspaces 1-10.
# Workspaces are fixed to specific monitors:
#   - Workspaces 1-5: Built-in display (eDP-1)
#   - Workspaces 6-10: External monitor (HDMI-A-1) when connected
#
# Single key presses for rapid workspace switching (common workflow).
# ============================================================================

bind = $mainMod, 1, workspace, 1   # Switch to workspace 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10  # Switch to workspace 10

# ============================================================================
# MOVE WINDOW TO WORKSPACE (Super+Shift + Number)
# ============================================================================
# Move the focused window to a specific workspace.
# The window remains on its assigned monitor but changes workspace context.
#
# Common workflow:
#   1. Open window in current workspace
#   2. Focus the window
#   3. Super+Shift+<number> to relocate it
# ============================================================================

bind = $mainMod SHIFT, 1, movetoworkspace, 1   # Move window to workspace 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# ============================================================================
# WINDOW REPOSITIONING WITHIN WORKSPACE (Super+Shift + hjkl)
# ============================================================================
# Vim-style keybindings to move (reposition) the focused window
# within the current tiling layout.
#
# This allows rearranging window positions without changing focus.
# Useful for organizing related windows on the same workspace.
# ============================================================================

bind = $mainMod SHIFT, h, movewindow, l    # Move window left
bind = $mainMod SHIFT, j, movewindow, d    # Move window down
bind = $mainMod SHIFT, k, movewindow, u    # Move window up
bind = $mainMod SHIFT, l, movewindow, r    # Move window right

# ============================================================================
# SPECIAL WORKSPACE / SCRATCHPAD (Super+A)
# ============================================================================
# Hyprland's scratchpad implementation: a hidden workspace accessible
# from any context. Useful for:
#   - Floating terminal always accessible (e.g., music player, notes)
#   - Temporary windows without cluttering main workspaces
#   - Quick access to utilities without changing focus
#
# Workflow:
#   1. Super+A: Toggle special workspace visibility
#   2. Super+Shift+A: Move current window to special workspace
#   3. Super+A again: Hide special workspace
# ============================================================================

bind = $mainMod, A, togglespecialworkspace, magic    # Toggle scratchpad visibility
bind = $mainMod SHIFT, A, movetoworkspace, special:magic  # Move window to scratchpad

# ============================================================================
# MOUSE CONTROL
# ============================================================================
# Trackpad/mouse bindings for common operations.
#
# Scroll wheel (Super + Scroll):
#   - Wheel up: Previous workspace
#   - Wheel down: Next workspace
#   (Allows rapid workspace cycling with mouse)
#
# Drag operations (Super + Mouse Button):
#   - mouse:272 (left button): Click-and-drag to move window
#   - mouse:273 (right button): Click-and-drag to resize window
# ============================================================================

bind = $mainMod, mouse_down, workspace, e+1     # Scroll wheel down = next workspace
bind = $mainMod, mouse_up, workspace, e-1       # Scroll wheel up = previous workspace
bindm = $mainMod, mouse:272, movewindow         # Super+LMB drag = move window
bindm = $mainMod, mouse:273, resizewindow       # Super+RMB drag = resize window

# ============================================================================
# MULTIMEDIA & HARDWARE KEYBINDINGS (Hardware Keys)
# ============================================================================
# Hardware key handling via SwayOSD (On-Screen Display daemon).
# These are special XF86 keys found on most modern laptops.
#
# 'bindel' = Bind Event Loop (repeats on key hold, important for volume/brightness)
#
# Volume Control:
#   - XF86AudioRaiseVolume: Increase volume (shows OSD)
#   - XF86AudioLowerVolume: Decrease volume (shows OSD)
#   - XF86AudioMute: Toggle mute state (shows visual feedback)
#   - XF86AudioMicMute: Toggle microphone mute
#
# Brightness Control:
#   - XF86MonBrightnessUp: Increase screen brightness
#   - XF86MonBrightnessDown: Decrease screen brightness
#   (SwayOSD displays visual indicator)
# ============================================================================

bindel = ,XF86AudioRaiseVolume, exec, swayosd-client --output-volume raise
bindel = ,XF86AudioLowerVolume, exec, swayosd-client --output-volume lower
bindel = ,XF86AudioMute, exec, swayosd-client --output-volume mute-toggle
bindel = ,XF86AudioMicMute, exec, swayosd-client --input-volume mute-toggle
bindel = ,XF86MonBrightnessUp, exec, swayosd-client --brightness raise
bindel = ,XF86MonBrightnessDown, exec, swayosd-client --brightness lower

##############################
### WINDOWS AND WORKSPACES ###
##############################

# ============================================================================
# WINDOW RULES & POLICIES
# ============================================================================
# Global rules applied to all windows based on matching criteria.
# These rules control window behavior, decoration, and positioning.
# ============================================================================

# Suppress maximize events from X11 applications
# Hyprland manages tiling automatically; maximized windows don't make sense
# in a tiling WM. This prevents apps from fighting with the layout.
windowrule = suppressevent maximize, class:.*

# ============================================================================
# LAYER RULES (UI ELEMENTS)
# ============================================================================
# Applied to overlay layers (waybar, application launcher, OSD).
#
# 'blur': Apply background blur effect (when blur is enabled via effects-toggle.sh)
# 'ignorezero': Ignore opacity=0 events (prevent flashing during animations)
#
# Affected layers:
#   - waybar: Status bar (top of screen)
#   - wofi: Application launcher (alternative to Albert)
#   - osd: On-screen display (volume/brightness feedback)
# ============================================================================

layerrule = blur, waybar          # Apply blur to waybar background
layerrule = ignorezero, waybar    # Ignore zero-opacity events
layerrule = blur, wofi            # Apply blur to wofi background
layerrule = ignorezero, wofi      # Ignore zero-opacity events
layerrule = blur, osd             # Apply blur to OSD background
layerrule = ignorezero, osd       # Ignore zero-opacity events

# ============================================================================
# INITIAL WINDOW FOCUS RULE
# ============================================================================
# Prevents focus from jumping to X11 windows when they first appear.
# This is important for vim users who want predictable focus behavior.
# The rule matches:
#   - Undecorated windows (empty class/title)
#   - XWayland (X11 compatibility layer) windows
#   - Floating windows appearing for the first time
# ============================================================================

windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# ============================================================================
# SYSTEM SERVICES & AUTHENTICATION
# ============================================================================
# Start the PolicyKit authentication agent (required for privilege escalation).
# This daemon intercepts authorization requests and presents a graphical prompt.
# ============================================================================

exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1